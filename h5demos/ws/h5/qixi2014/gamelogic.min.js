(function(){window.LoadingScene=function(c){function e(a){a.x=(c.width-a.getMeasuredWidth())/2;a.y=(c.height-a.getMeasuredHeight())/2}function f(a){"image"==a.item.type&&(images[a.item.id]=a.result)}function d(){replaceScene(StartScene(c))}function h(g){a.text="Loading "+parseInt(100*g.progress)+"%";e(a)}var b=new createjs.Container,a=new createjs.Text("Loading...","bold 20px Arial");b.addChild(a);e(a);(function(){var a=new createjs.LoadQueue(!1);a.addEventListener("fileload",f);a.addEventListener("complete",
d);a.addEventListener("progress",h);a.loadManifest(lib.properties.manifest)})();return b}})();(function(){window.StartScene=function(c){function e(a){startGameBtn.removeEventListener("click",e);replaceScene(GameScene(c,d.getStage()))}function f(a){location.href="customgame.html"}var d=new createjs.Container,h=new createjs.Container;d.addChild(h);var b=new createjs.Text("","bold 20px Arial","#ff00ff");(function(){for(var a,g=0;9>g;g++)a=new lib.Rose,a.x=Math.random()*(c.width-100)+50,a.y=Math.random()*(c.height-100)+50,a.rotation=360*Math.random(),h.addChild(a)})();(function(){d.addChild(b);
var a=null,g=location.href.indexOf("?");if(-1<g)try{a=decodeURI(location.href.substr(g+1))}catch(f){}if(null==a||""==a)a="\u4ee5\u6b64\u6e38\u620f\u732e\u7ed9\u6211\u6df1\u7231\u7684\u79cb\u513f\uff0c\u795d\u79cb\u513f\u5929\u5929\u5f00\u5fc3\uff01\u8fd99\u6735\u73ab\u7470\u4ee3\u8868\u6211\u6c38\u4e45\u7231\u4f60";b.text=a.cutStr(10).join("\n");b.y=20;b.x=(c.width-b.getBounds().width)/2})();startGameBtn=new lib.StartGameBtn;(function(a){var g=a.getBounds();a.x=(c.width-g.width)/2;a.y=(c.height-g.height)/
2})(startGameBtn);d.addChild(startGameBtn);startGameBtn.addEventListener("click",e);(function(){var a=new lib.CustomGameBtn;d.addChild(a);a.addEventListener("click",f);var g=a.getBounds();a.x=(c.width-g.width)/2;a.y=c.height-g.height-20})();return d}})();(function(){window.Line=function(c,e){var f=new createjs.Container,d=c/GAME_CONFIG_H_NUM,h=new lib.QLMc,b=d/h.getBounds().width;h.scaleX=b;h.scaleY=b;var a=parseInt(Math.random()*GAME_CONFIG_H_NUM);h.x=a*d;f.addChild(h);f.checkToRemove=function(){f.y>=e&&f.parent&&f.parent.removeChild(f)};f.moveDown=function(){createjs.Tween.get(f).to({y:f.y+d},100).call(f.checkToRemove);f.checkToRemove()};f.getQlIndex=function(){return a};return f}})();(function(){window.GameScene=function(c,e){function f(f){var b=Line(c.width,c.height);b.y=c.height-g*f;a.addChild(b)}function d(b){if(1==Math.floor((c.height-b.stageY)/g))for(var d=0;d<a.children.length;d++){var e=a.getChildAt(d);if(Math.round(c.height-e.y)==Math.round(2*g)){b=Math.floor(b.stageX/g);if(b==e.getQlIndex()){d=new lib.Rose;d.x=(b+1)*g-d.getBounds().width;e.addChild(d);f(11);for(e=0;e<a.children.length;e++)a.getChildAt(e).moveDown();m++}else h();break}}}function h(){clearInterval(n);a.removeAllChildren();
e.removeEventListener("stagemouseup",d);replaceScene(GameOverScene(c,m))}var b=new createjs.Container,a=new createjs.Container;b.addChild(a);window.GAME_CONFIG_H_NUM=4;var g=c.width/GAME_CONFIG_H_NUM,l=50,k=new createjs.Text(l+"\u79d2","bold 30px Arial","#ff0000"),m=0;(function(){for(var a=2;10>=a;a++)f(a)})();b.addChild(k);k.x=(c.width-k.getMeasuredWidth())/2;k.y=50;e.addEventListener("stagemouseup",d);var n=setInterval(function(){l--;k.text=l+"\u79d2";0>=l&&h()},1E3);return b}})();(function(){window.GameOverScene=function(c,e){function f(a){startGameBtn.removeEventListener("click",f);replaceScene(GameScene(c,d.getStage()))}var d=new createjs.Container,h=new createjs.Container;d.addChild(h);var b=new createjs.Text("","bold 20px Arial","#ff00ff");(function(){for(var a,b=0;9>b;b++)a=new lib.Rose,a.x=Math.random()*(c.width-100)+50,a.y=Math.random()*(c.height-100)+50,a.rotation=360*Math.random(),h.addChild(a)})();d.addChild(b);b.text=40>e?"\u624d\u9001\u51fa"+e+"\u4e2a\u795d\u798f\uff0c\u96be\u602a\u73b0\u5728\u4f60\u8fd8\u5355\u8eab":
70>e?"\u9001\u51fa"+e+"\u4e2a\u795d\u798f\uff0c\u4e00\u822c\u4e00\u822c\u5427\uff0c\u9694\u58c1\u59d0\u4eec\u968f\u4fbf\u52a8\u52a8\u624b\u90fd\u6bd4\u4f60\u9001\u5f97\u591a":100>e?"\u9001\u51fa"+e+"\u4e2a\u795d\u798f\uff0c\u5f88\u4e0d\u9519\u54e6\uff0c\u518d\u63a5\u518d\u5389\u54c7":"\u9001\u51fa"+e+"\u4e2a\u795d\u798f\uff0c\u4f60\u592a\u5389\u5bb3\u4e86\uff0c\u4e00\u5b9a\u662f\u60c5\u5723";b.text=b.text.cutStr(10).join("\n");b.y=20;b.x=(c.width-b.getBounds().width)/2;startGameBtn=new lib.RestartGameBtn;
(function(a){var b=a.getBounds();a.x=(c.width-b.width)/2;a.y=(c.height-b.height)/2})(startGameBtn);d.addChild(startGameBtn);startGameBtn.addEventListener("click",f);(function(){var a=new createjs.Text("\u6e38\u620f\u4f5c\u8005\uff1a\u6781\u5ba2\u5b66\u9662 ime\n\u5982\u679c\u4f60\u60f3\u5b66\u4e60\u5f00\u53d1\u8be5\u6e38\u620f\n\u8bf7\u5230\u6781\u5ba2\u5b66\u9662\u5b98\u7f51\nhttp://jikexy.com","bold 20px Arial","#0000ff");d.addChild(a);var b=a.getBounds();a.x=(c.width-b.width)/2;a.y=c.height-b.height-
10})();return d}})();
